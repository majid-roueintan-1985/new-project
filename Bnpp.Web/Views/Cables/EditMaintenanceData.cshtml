@model Bnpp.DataLayer.Entities.MaintenanceCable
@{
    ViewData["Title"] = "EditMaintenanceData";
    Layout =null;
}

<h2>Edit Maintenance Data</h2>

<div id="normal">
    <form id="designForm" asp-action="EditMaintenanceData" method="post">
        <input type="hidden" asp-for="ID"/>
        <input type="hidden" asp-for="AttachActImage"/>
        <input type="hidden" asp-for="AttachActFileName" />
        <table cellpadding="3" cellspacing="0">
            <tbody>
                <tr>
                    <td>
                        Cable ID Group:
                    </td>
                    <td>
                        <select name="system" asp-for="CableIDGroup" asp-items="@ViewBag.CableGroup as SelectList" aria-controls="myTable" class="">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Cable ID:
                    </td>
                    <td>
                        <select name="system" asp-for="CableID" asp-items="@ViewBag.CableID as SelectList" aria-controls="myTable" class="">
                        </select>
                    </td>
                    <td>
                        <span asp-validation-for="CableID"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        Owner:
                    </td>
                    <td>
                        <select name="system" asp-for="Owner" asp-items="@ViewBag.Owner as SelectList" aria-controls="myTable" class="">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Start time of maintenance:
                    </td>
                    <td>

                        <input asp-for="StartTimeMaintenance" onkeydown="return false;" style="direction: ltr; text-align: left;">
                    </td>
                </tr>
                <tr>
                    <td>
                        End time of maintenance:
                    </td>
                    <td>

                        <input asp-for="EndTimeMaintenance" onkeydown="return false;" style="direction: ltr; text-align: left;">
                    </td>
                </tr>
                <tr>
                    <td>
                        visual  inspection results after maintenance:
                    </td>
                    <td>
                        <label>
                            <select asp-for="VisualResultMaintenance" name="ExpectedDegradationMechanisms" aria-controls="myTable" class="">
                                
                                <option value="OK">OK</option>
                                <option value="Not OK">Not OK</option>
                            </select>
                        </label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Description of Reasons for maintenance action:
                    </td>
                    <td>
                        <input asp-for="DescriptionMaintenanceReasons" type="text" style="direction: ltr; text-align: left;">
                    </td>
                    <td>
                        <span asp-validation-for="DescriptionMaintenanceReasons"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        Attach Act No.:
                    </td>
                    <td>
                        <input asp-for="AttachActNo" type="number" style="direction: ltr; text-align: left;">
                    </td>
                    <td>
                        <span asp-validation-for="AttachActNo"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        Type of Maintenance work:
                    </td>
                    <td>
                        <select name="system" asp-for="TypeofMaintenancework" asp-items="@ViewBag.TypeofMaintenance as SelectList" aria-controls="myTable" class="">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Type Tests:
                    </td>
                    <td>
                        <select name="system" asp-for="TypeofMaintenancework" asp-items="@ViewBag.TestType as SelectList" aria-controls="myTable" class="">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Value:
                    </td>
                    <td>
                        <input asp-for="Value" type="number" style="direction: ltr; text-align: left;">
                    </td>
                    <td>
                        <span asp-validation-for="Value"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        Attach Act No.:
                    </td>
                    <td>
                        Select File:
                    </td>
                    <td>
                        <input type="file" name="imgAttachAct" id="imgAttachAct" style="direction: ltr; text-align: left;">
                    </td>
                </tr>
                <tr>
                    <td>
                        Acceptance Criteria:
                    </td>
                    <td>
                        <input asp-for="AcceptanceCriteria" type="number" style="direction: ltr; text-align: left;">
                    </td>
                    <td>
                        <span asp-validation-for="AcceptanceCriteria"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        Result:
                    </td>
                    <td>
                        <select name="system" asp-for="TypeofMaintenancework" asp-items="@ViewBag.ResaultCable as SelectList" aria-controls="myTable" class="">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="button" onclick="AjaxdocumentFormSubmit()" value="Save" class="butn-save" style="direction: ltr; text-align: left;">
                        <input type="button" onclick="Cancel()" value="Cancel" id="Button2" class="butn-cancel" style="direction: ltr; text-align: left;">
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>


<link href="/css/kendo.common.min.css" rel="stylesheet" />
@*<link href="/css/kendo.rtl.min.css" rel="stylesheet" />*@
<link href="/css/kendo.default.min.css" rel="stylesheet" />

<script src="/js/jquery.min.js"></script>
@*<script src="/js/kendo.web.min.js"></script>*@
<script src="/js/kendo.all.min.js"></script>
<script src="~/js/jquery.validate.min.js"></script>
<script src="~/js/jquery.validate.unobtrusive.min.js"></script>



<script>
    // create DatePicker from input HTML element
    $("#StartTimeMaintenance").kendoDatePicker(
        {
            format: "yyyy/MM/dd"
        });

    $("#EndTimeMaintenance").kendoDatePicker(
        {
            format: "yyyy/MM/dd"
        });



    function Cancel() {
        $("#Tabs").load("/Cables/MaintenanceData/");
    }

</script>

<script type="text/javascript">
    function AjaxdocumentFormSubmit() {
        //Set the URL.
        var url = $("#designForm").attr("action");
        //Add the Field values to FormData object.

        var formData = new FormData();

        //Cable id & cable group

        var cableId = $('#CableID').find(":selected").text();
        formData.append("CableID", cableId);

        var cableGroup = $('#CableIDGroup').find(":selected").text();
        formData.append("CableIDGroup", cableGroup);
        //

        formData.append("Owner", $("#Owner").val());
        formData.append("ID", $("#ID").val());
        formData.append("StartTimeMaintenance", $("#StartTimeMaintenance").val());
        formData.append("EndTimeMaintenance", $("#EndTimeMaintenance").val());
        formData.append("VisualResultMaintenance", $("#VisualResultMaintenance").val());
        formData.append("DescriptionMaintenanceReasons", $("#DescriptionMaintenanceReasons").val());
        formData.append("AttachActNo", $("#AttachActNo").val());
        formData.append("TypeofMaintenancework", $("#TypeofMaintenancework").val());
        formData.append("TypeTests", $("#TypeTests").val());
        formData.append("Value", $("#Value").val());
        formData.append("AcceptanceCriteria", $("#AcceptanceCriteria").val());
        formData.append("Resault", $("#Resault").val());

        formData.append("AttachActImage", $("#AttachActImage").val());
        formData.append("AttachActFileName", $("#AttachActFileName").val());

        formData.append("fileAttachAct", $("#imgAttachAct")[0].files[0]);

        $.ajax({
            type: 'POST',
            url: url,
            data: formData,
            processData: false,
            contentType: false
        }).done(function () {
            $("#Tabs").load("/Cables/MaintenanceData/");
        });
    }


    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#imgCourse').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }


    //$("#CableIDGroup").change(function () {

    //    debugger;
    //    $("#CableID").empty();
    //    $.getJSON("/Cables/GetSubGroups/" + $("#CableIDGroup :selected").val(),
    //        function (data) {

    //            $.each(data,
    //                function () {
    //                    $("#CableID").append('<option value=' + this.value + '>' + this.text + '</option>');

    //                });

    //        });


    //});

</script>
