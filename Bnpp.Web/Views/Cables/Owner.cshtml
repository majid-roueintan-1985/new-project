@model IEnumerable<Bnpp.DataLayer.Entities.Owner>
@{
    ViewData["Title"] = "Owner";
    Layout = null;
}

<h2>Owner</h2>

<table cellpadding="3" cellspacing="0">
    <tbody>
        <tr>
            <td>
                <label style="margin:10px">

                    <a class="btn-defaults-equip" onclick="CreateGeneralData()">
                        Back
                    </a>

                </label>
            </td>
        </tr>
    </tbody>
</table>

<div id="iContent">
    <div id="tab1" class="tab-item" style="display: block;">
        <div id="newPage">
            <div id="newAgeingMechanism">
                <div>


                    <a class="btn-new-equip" style="cursor:pointer" onclick="CreateNewOwner(@ViewBag.Code)">New</a>
                    <input type="button" id="delete" class="btn-delete-equip" value="Delete">
                    <br />
                    @{
                        int rowCount = 1;
                    }
                    <table id="myOwnerTable" cellpadding="3" cellspacing="0" class="show-table">
                        <thead>
                            <tr role="row">
                                <th>
                                    <input type="checkbox" id="checkAll" />
                                </th>
                                <th></th>
                                <th>
                                    <b>Owner Title</b>
                                </th>

                                <th style="width: 120px">
                                    <b>Actions</b>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr role="row">
                                    <td>
                                        <input type="checkbox" class="checkBox" value="@item.OwnerId" />
                                    </td>
                                    <td>
                                        @rowCount
                                    </td>
                                    <td>
                                        @item.OwnerTitle
                                    </td>
                                    <td>
                                        <a class="btn-edit-equip" onclick="EditOwner(@item.OwnerId)">
                                            Edit
                                        </a>
                                    </td>
                                </tr>
                                rowCount++;
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>





<script src="/js/jquery.min.js"></script>

<script src="/js/datatables.min.js"></script>

<script>

    $(document).ready(function () {
        $("#myOwnerTable").DataTable();
    });



    function CreateGeneralData() {
        if (@ViewBag.Code== 1) {
            $("#newPage").load("/Cables/CreateGeneralCables/");
        }
        if (@ViewBag.Code== 2) {
            $("#newPage").load("/Cables/CreateOperatingData/");
        }
        if (@ViewBag.Code== 3) {
            $("#newPage").load("/Cables/CreateMaintenanceData/");
        }
        if (@ViewBag.Code== 4) {
            $("#newPage").load("/Cables/CreateCablereport/");
        }

    }

    //function CreateNewOwner(code) {
    //    //alert(code);
    //    $("#newAgeingMechanism").load("/Cables/CreateOwner/" + "?code=" + @ViewBag.Code);
    //}

    function CreateNewOwner() {
        $("#newAgeingMechanism").load("/Cables/CreateOwner/");
    }

    function EditOwner(id) {
        $("#newAgeingMechanism").load("/Cables/EditOwner/" + id);
    }

    //function EditOwner(id) {
    //    $("#newAgeingMechanism").load("/Cables/EditOwner/" + id + "?code=" + @ViewBag.Code);
    //}

    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });


        var result = confirm("are you sure you want to delete?");
        if (result) {
            $.ajax({
                type: "POST",
                url: "/Cables/DeleteOwner",
                data: { "ownerId": selectedIDs },

                success: function (response) {
                    $("#newData").load("/Cables/Owner/");
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }

            });
        }
    });
</script>


