@model IEnumerable<Bnpp.DataLayer.Entities.FailureDiscovery>
@{
    ViewData["Title"] = "MethodofFailure";
    Layout =null ;
}

<h2>Method of Failure</h2>

<table cellpadding="3" cellspacing="0">
    <tbody>
        <tr>
            <td>
                <label style="margin:10px">

                    <a class="btn-defaults-equip" onclick="CreateOperatingData()">
                        Back
                    </a>

                </label>
            </td>
        </tr>
    </tbody>
</table>

<div id="iContent">
    <div id="tab1" class="tab-item" style="display: block;">
        <div id="newPage">
            <div id="newAgeingMechanism">
                <div>


                    <a class="btn-new-equip" style="cursor:pointer" onclick="CreateNewFailureDiscovery()">New</a>
                    <input type="button" id="delete" class="btn-delete-equip" value="Delete">
                    <br />
                    @{
                        int rowCount = 1;
                    }
                    <table id="myOwnerTable" cellpadding="3" cellspacing="0" class="show-table">
                        <thead>
                            <tr role="row">
                                <th style="width: 250px">
                                    <input type="checkbox" id="checkAll" />
                                </th>
                                <th style ="width: 250px"></th>
                                <th style="width: 250px">
                                    <b>failure Title</b>
                                </th>

                                <th style="width: 250px">
                                    <b>Actions</b>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr role="row">
                                    <td>
                                        <input type="checkbox" class="checkBox" value="@item.ID" />
                                    </td>
                                    <td>
                                        @rowCount
                                    </td>
                                    <td>
                                        @item.FailureDiscoveryTitle
                                    </td>
                                    <td>
                                        <a class="btn-edit-equip" onclick="EditFailureDiscovery(@item.ID)">
                                            Edit
                                        </a>
                                    </td>
                                </tr>
                                rowCount++;
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>





<script src="/js/jquery.min.js"></script>

<script src="/js/datatables.min.js"></script>

<script>

    $(document).ready(function () {
        $("#myOwnerTable").DataTable();
    });



    function CreateOperatingData() {
        $("#newPage").load("/Cables/CreateOperatingData/");
    }

    function CreateNewFailureDiscovery() {
        $("#newAgeingMechanism").load("/Cables/CreateMethodofFailure/");
    }



    function EditFailureDiscovery(id) {
        $("#newAgeingMechanism").load("/Cables/EditMethodofFailure/" + id);

    }

    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });


        var result = confirm("are you sure you want to delete?");
        if (result) {
            $.ajax({
                type: "POST",
                url: "/Cables/DeleteMethodofFailure",
                data: { "failureId": selectedIDs },

                success: function (response) {
                    $("#newData").load("/Cables/MethodofFailure/");
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }

            });
        }
    });
</script>
