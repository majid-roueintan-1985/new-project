@model Bnpp.DataLayer.Entities.OperatingCableData
@{
    ViewData["Title"] = "CreateOperatingData";
    Layout = null;
}

<h2>Create Operating Data</h2>

<div id="newData">
    <div id="normal">
        <form id="designForm" asp-action="CreateOperatingData" method="post">

            <table cellpadding="3" cellspacing="0">
                <tbody>
                    <tr>
                        <td>
                            Cable ID Group:
                        </td>
                        <td>
                            <select name="system" asp-for="CableIDGroup" asp-items="@ViewBag.CableGroup as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowCableGroup(2)">
                                    Cable ID Group
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Cable ID:
                        </td>
                        <td>
                            <select name="system" asp-for="CableID" asp-items="@ViewBag.CableID as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowCableID(2)">
                                    Cable ID
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Owner:
                        </td>
                        <td>
                            <select name="system" asp-for="Owner" asp-items="@ViewBag.Owner as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowOwner(2)">
                                    Owner
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Current(AC/DC):
                        </td>
                        <td>
                            <select name="system" asp-for="Current" asp-items="@ViewBag.Current as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowCurrent(2)">
                                    Current
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Mode of operation:
                        </td>
                        <td>
                            <select name="system" asp-for="ModeofOperation" asp-items="@ViewBag.OperationMode as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowModeofoperation(2)">
                                    Mode of operation
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            AKZ of Temperature sensor:
                        </td>
                        <td>
                            <input asp-for="AKZofTemperatureSensor" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="AKZofTemperatureSensor"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Location of Temperature sensor:
                        </td>
                        <td>
                            <input asp-for="TemperatureSensorLocation" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="TemperatureSensorLocation"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Temperature Sensor Value (°C):
                        </td>
                        <td>
                            <input asp-for="TemperatureSensorValue" type="number" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="TemperatureSensorValue"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            AKZ of Radiation measurment sensor:
                        </td>
                        <td>
                            <input asp-for="AKZofRadiationSensor" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="AKZofRadiationSensor"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Location of Radiation measurment sensor:
                        </td>
                        <td>
                            <input asp-for="RadiationSensorLocation" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="RadiationSensorLocation"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Radiation Sensor Value (Micro SV):
                        </td>
                        <td>
                            <input asp-for="RadiationSensorValue" type="number" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="RadiationSensorValue"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            AKZ of humidity measurment sensor:
                        </td>
                        <td>
                            <input asp-for="AKZofHumiditySensor" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="AKZofHumiditySensor"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Location of humidity measurment sensor:
                        </td>
                        <td>
                            <input asp-for="LocationHumiditySensor" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="LocationHumiditySensor"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Humidity Sensor Value (%):
                        </td>
                        <td>
                            <input asp-for="HumiditySensorValue" type="number" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="HumiditySensorValue"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Date of failure:
                        </td>
                        <td>
                            @*<input asp-for="FailureDate"  style="direction: ltr; text-align: left;">*@
                            <input asp-for="FailureDate" onkeydown="return false;" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="FailureDate"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Method of failure discovery:
                        </td>
                        <td>
                            <select name="system" asp-for="MethodofFailure" asp-items="@ViewBag.FailureDiscovery as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowMethodofFailure()">
                                    Method of failure discovery
                                </a>
                            </label>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            Description of failure:
                        </td>
                        <td>
                            <input asp-for="FailureDescription" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="FailureDescription"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            system and environmental condition
                            relevant to the failure:
                        </td>
                        <td>
                            <select name="system" asp-for="ConditionOfFailure" asp-items="@ViewBag.FailureCondition as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowConditionOfFailure()">
                                    Failure Condition
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Cause of failure:
                        </td>
                        <td>
                            <input asp-for="CauseofFailure" type="text" style="direction: ltr; text-align: left;">
                        </td>
                        <td>
                            <span asp-validation-for="CauseofFailure"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Failed parts:
                        </td>
                        <td>
                            <select name="system" asp-for="FailedParts" asp-items="@ViewBag.FailedParts as SelectList" aria-controls="myTable" class="">
                            </select>
                        </td>
                        <td>
                            <label>
                                <a class="btn-defaults-equip" onclick="ShowFailedParts(2)">
                                    Failed parts
                                </a>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="button" onclick="AjaxdocumentFormSubmit()" value="Save" class="butn-save" style="direction: ltr; text-align: left;">
                            <input type="button" onclick="Cancel()" value="Cancel" id="Button2" class="butn-cancel" style="direction: ltr; text-align: left;">
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
</div>

<link href="/css/kendo.common.min.css" rel="stylesheet" />
@*<link href="/css/kendo.rtl.min.css" rel="stylesheet" />*@
<link href="/css/kendo.default.min.css" rel="stylesheet" />

<script src="/js/jquery.min.js"></script>
@*<script src="/js/kendo.web.min.js"></script>*@
<script src="/js/kendo.all.min.js"></script>
<script src="~/js/jquery.validate.min.js"></script>
<script src="~/js/jquery.validate.unobtrusive.min.js"></script>



<script>
    // create DatePicker from input HTML element
    $("#FailureDate").kendoDatePicker(
        {
            format: "yyyy/MM/dd"
        });


    function Cancel() {
        $("#Tabs").load("/Cables/OperatingData/");
    }

    function ShowCurrent(codes) {
        $("#newData").load("/Cables/Current/" + "?codes=" + codes);
    }

    function ShowCableID(codes) {
        $("#newData").load("/Cables/CableID/" + "?codes=" + codes);
    }

    function ShowCableGroup(codes) {
        $("#newData").load("/Cables/CableGroup/" + "?codes=" + codes);
    }

    function ShowOwner(codes) {

        $("#newData").load("/Cables/Owner/" + "?codes=" + codes);
    }


    function ShowModeofoperation(codes) {
        $("#newData").load("/Cables/OperationMode/" + "?codes=" + codes);
    }
    
    function ShowMethodofFailure() {
        $("#newData").load("/Cables/MethodofFailure/");
    }

    function ShowConditionOfFailure() {
        $("#newData").load("/Cables/FailureCondition/");
    }

    function ShowFailedParts(codes) {
        $("#newData").load("/Cables/FailedParts/" + "?codes=" + codes);
    }
    
</script>

<script type="text/javascript">
    function AjaxdocumentFormSubmit() {
        //Set the URL.
        var url = $("#designForm").attr("action");
        //Add the Field values to FormData object.

        var formData = new FormData();

        //Cable id & cable group

        var cableId = $('#CableID').find(":selected").text();
        formData.append("CableID", cableId);

        var cableGroup = $('#CableIDGroup').find(":selected").text();
        formData.append("CableIDGroup", cableGroup);
        //


        formData.append("Owner", $("#Owner").val());

        formData.append("Current", $("#Current").val());

        formData.append("ModeofOperation", $("#ModeofOperation").val());
        formData.append("AKZofTemperatureSensor", $("#AKZofTemperatureSensor").val());
        formData.append("TemperatureSensorLocation", $("#TemperatureSensorLocation").val());
        formData.append("TemperatureSensorValue", $("#TemperatureSensorValue").val());
        formData.append("AKZofRadiationSensor", $("#AKZofRadiationSensor").val());
        formData.append("RadiationSensorLocation", $("#RadiationSensorLocation").val());
        formData.append("RadiationSensorValue", $("#RadiationSensorValue").val());
        formData.append("AKZofHumiditySensor", $("#AKZofHumiditySensor").val());
        formData.append("LocationHumiditySensor", $("#LocationHumiditySensor").val());
        formData.append("HumiditySensorValue", $("#HumiditySensorValue").val());
        formData.append("FailureDate", $("#FailureDate").val());
        formData.append("MethodofFailure", $("#MethodofFailure").val());
        formData.append("FailureDescription", $("#FailureDescription").val());
        formData.append("ConditionOfFailure", $("#ConditionOfFailure").val());
        formData.append("CauseofFailure", $("#CauseofFailure").val());
        formData.append("FailedParts", $("#FailedParts").val());

        $.ajax({
            type: 'POST',
            url: url,
            data: formData,
            processData: false,
            contentType: false
        }).done(function () {
            $("#Tabs").load("/Cables/OperatingData/");
        });
    }


    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#imgCourse').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }


    //$("#CableIDGroup").change(function () {

    //    debugger;
    //    $("#CableID").empty();
    //    $.getJSON("/Cables/GetSubGroups/" + $("#CableIDGroup :selected").val(),
    //        function (data) {

    //            $.each(data,
    //                function () {
    //                    $("#CableID").append('<option value=' + this.value + '>' + this.text + '</option>');

    //                });

    //        });


    //});

</script>
