@*@model IEnumerable<Bnpp.DataLayer.Entities.Transients>*@
@model IEnumerable<Bnpp.DataLayer.ViewModels.TransientsForSearchInPeriodViewModel>
@{
    ViewData["Title"] = "SearchTramsients";
    Layout = null;
}


<div id="tab1" class="tab-item" style="display: block;">
    <div id="newPage">
        <div class="bevel-box">
            @{
                int rowCount = 1;
            }
            <table id="mySearchTramsientsTable" cellpadding="3" cellspacing="0" class="show-table">
                <thead>
                    <tr role="row">

                        @* <th>

                        </th>*@
                        <th>
                            <b>Transient Code </b>
                        </th>
                        <th>
                            <b>Transient Name</b>
                        </th>
                        <th>
                            <b>Allowable No. of Transients</b>
                        </th>
                        <th>
                            <b>Actual No. of Transients</b>
                        </th>
                        <th>
                            <b>Number of transients (in the period)</b>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr role="row">

                            <td>
                                @item.Code
                            </td>
                            <td>
                                @item.Name
                            </td>
                            <td>
                                @item.Values
                            </td>
                            <td>
                                @item.Count
                            </td>
                            <td>
                                @item.NumberInPeriod
                            </td>
                        </tr>
                        rowCount++;
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>


<link href="/css/datatables.min.css" rel="stylesheet" />
<link href="/css/buttons.dataTables.min.css" rel="stylesheet" />



<script src="/js/jquery.min.js"></script>
<script src="/js/datatables.min.js"></script>
<script src="/js/dataTables.buttons.min.js"></script>
<script src="/js/jszip.min.js"></script>
<script src="/js/pdfmake.min.js"></script>
<script src="/js/vfs_fonts.js"></script>
<script src="/js/buttons.html5.min.js"></script>
<script src="/js/buttons.print.min.js"></script>

<link href="/css/bootstrap-modal1.css" rel="stylesheet" type="text/css" />



<script src="/js/bootstrap.min.js"></script>



<script>


    $(document).ready(function () {
        $('#mySearchTramsientsTable').DataTable({
            dom: 'Bfrtip',
            buttons: [
                'excel'
            ]
        });
    });

    $(document).ready(function () {
        $("#savedTransient").DataTable();
    });

    $(document).ready(function () {
        $("#nameSearch").DataTable();
    });

    $(document).ready(function () {
        $("#codeSearch").DataTable();
    });


    function codeSearch() {
        var code = $('#code').val();
        $.ajax({

            type: "POST",
            url: "/Transients/Search",
            data: {
                "code": code,

            },
            success:
                function (response) {
                    $("#result").html(response);

                    //selectedRow.after(response);
                },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }


    function nameSearch() {
        var transientName = $('#transientName').val();

        $.ajax({

            type: "POST",
            url: "/Transients/nameSearch",
            data: {


                "transientName": transientName

            },
            success:
                function (response) {
                    $("#result").html(response);

                    //selectedRow.after(response);

                },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }



    function cancelSearch() {
        $("#result").html("");

        $("#transientName").val("");
        $("#code").val("");
    }

    function Create(parentId) {
        $.get("/Transients/Create/" + parentId,
            function (result) {
                $("#myModal").modal();
                $("#myModalLabel").html("");
                $("#myModalBody").html(result);
            });
    }

    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });

        var result = confirm("are you sure you want to delete?");
        if (result) {

            $.ajax({
                type: "POST",
                url: "/Cables/DeleteCable",
                data: { "cableId": selectedIDs },



                success: function (response) {
                    window.location.href = "/Cables";
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }

            });
        }

    });
</script>

