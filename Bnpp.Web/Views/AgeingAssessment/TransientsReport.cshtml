@model IEnumerable<Bnpp.DataLayer.ViewModels.TransientsListViewModel>
@{
    ViewData["Title"] = "TransientsReport";
    Layout = null;
}

<div class="dcontent">
    <div style="margin-top: 10px; background-color: #6b8d9e; padding-top: 5px; padding-bottom: 5px; padding-right: 10px; border-radius: 5px; border: solid 1px #cccccc; background: repeating-linear-gradient(-45deg, #7fa1b3, #6b8d9e 1px, #6b8d9e 1px, #6b8d9e 20px);">
        &nbsp;
    </div>

    <div style="border-radius: 5px; margin-top: 5px; margin-bottom: 5px; padding: 15px; border: solid 1px #cea001; background-color: #ffe100;">
        <table cellpadding="3" cellspacing="0">
            <tbody>
                <tr>
                    <td style="">
                        <b><a class="breadcumb2-link" href="/Admin">Main</a></b>
                    </td>
                </tr>
            </tbody>
        </table>
        <a id="iHelp" style="float: right; position: relative; top: -32px;" href="javascript:;" onclick="showHelp();">
            <img src="/images/help.png" style="width: 48px;" class="imgHelp">
        </a>
    </div>

    @*<h1 id="iH1">
    Test & Inspection Data
    </h1>*@
    <div id="iContent">

        <div class="tab-buttons">
            <ul>
                <li id="tab-button1" class="tab-buttons-li" style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
                    <a id="tab-button-a1"
                       onclick="showPage1()" style="cursor:pointer;color: rgb(0, 113, 158);">
                        SACOR Report
                    </a>
                </li>
                <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(208, 208, 208); border-color: rgb(128, 128, 128); font-weight: bold;">
                    <a id="tab-buttona2" onclick="showPage2()" style="cursor:pointer;color: rgb(110, 110, 255);">
                        Transients Report
                    </a>

                </li>
                <li id="tab-button3" class="tab-buttons-li" style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
                    <a id="tab-button-a3" onclick="showPage3()" style="cursor:pointer;color: rgb(110, 110, 255);">
                        Deviation of water chemistry parameters Report
                    </a>
                </li>

            </ul>

            <div style="clear:both;"></div>
        </div>
        <div id="submenu">
            <div id="tab1" class="tab-item" style="display: block;">

                @*<h1 id="iH1">Inspection Programs</h1>*@


                <div class="tab-buttons">
                    <ul>
                        <li id="tab-button1" class="tab-buttons-li" @*style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;"*@ style="background-color: rgb(208, 208, 208); border-color: rgb(128, 128, 128); font-weight: bold;">
                            <a id="tab-button-a1"
                               onclick="showsubPage1()" style="cursor:pointer;color: rgb(0, 113, 158);">
                                All Transients
                            </a>
                        </li>
                        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
                            <a id="tab-buttona2" onclick="showsubPage2()" style="cursor:pointer;color: rgb(110, 110, 255);">
                                Transients in a Period
                            </a>
                        </li>
                    </ul>

                    <div style="clear:both;"></div>
                </div>




                <div id="newPage">
                    @*<div class="bevel-box">
                    <table cellpadding="3" cellspacing="0">
                    <tbody>
                    <tr>

                    <td>
                    <input type="file" name="uploadedFile" id="uploadedFile" style="direction: ltr; text-align: left;">

                    </td>


                    <td>
                    <form method="post" asp-controller="Inspection" asp-action="ExportInspectionPrograms">
                    <input type="submit" value="Export Excel" />
                    </form>
                    </td>

                    <td style="width: 200px;">
                    <span id="message">
                    </span>
                    </td>
                    <td>
                    <a href="#" target="_blank">
                    <img src="/images/print_printer.png" title="Print">
                    </a>
                    </td>
                    </tr>
                    </tbody>
                    </table>

                    </div>*@
                    <div>
                        @*<div class="bevel-box">
                            <table cellpadding="3" cellspacing="0">
                                <tbody>
                                    <tr>
                                        <td>
                                            <form method="post" asp-controller="AgeingAssessment" asp-action="ExportAllTransient">
                                                <input type="text" id="exportSelectedData" name="reportId" style="display:none" />
                                                <input type="submit"  value="Export Excel" />
                                            </form>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>*@
                        <div id="iLoading22" style="display: none;">
                            <img src="/images/loading.gif">
                        </div>

                        <h1>All Transients</h1>

                        @*<a class="btn-new-equip" style="cursor:pointer" onclick="Create()">New</a>
                        <input type="button" id="delete" class="btn-delete-equip" value="Delete">*@
                        <br />
                        @{
                            int rowCount = 1;
                        }
                        <table id="myTransientsReportTable" cellpadding="3" cellspacing="0" class="show-table">
                            <thead>
                                <tr role="row">

                                    @* <th>

                                    </th>*@
                                    <th>
                                        <b>Transient Code </b>
                                    </th>
                                    <th>
                                        <b>Transient Name</b>
                                    </th>
                                    <th>
                                        <b>Allowable No. of Transients</b>
                                    </th>
                                    <th>
                                        <b>Actual No. of Transients</b>
                                    </th>
                                    <th>
                                        <b>Remaining No. of Transients</b>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr role="row">

                                        <td>
                                            @item.Code
                                        </td>
                                        <td>
                                            @item.Name
                                        </td>
                                        <td>
                                            @item.Values
                                        </td>
                                        <td>
                                            @item.Count
                                        </td>


                                        <td>
                                            @{
                                                int res = Convert.ToInt32(item.Values) - item.Count;
                                            }
                                            @res

                                        </td>
                                    </tr>
                                    rowCount++;
                                }
                            </tbody>
                        </table>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>




<link href="/css/datatables.min.css" rel="stylesheet" />
<link href="/css/buttons.dataTables.min.css" rel="stylesheet" />



<script src="/js/jquery.min.js"></script>
<script src="/js/datatables.min.js"></script>
<script src="/js/dataTables.buttons.min.js"></script>
<script src="/js/jszip.min.js"></script>
<script src="/js/pdfmake.min.js"></script>
<script src="/js/vfs_fonts.js"></script>
<script src="/js/buttons.html5.min.js"></script>
<script src="/js/buttons.print.min.js"></script>



<script src="/js/jquery.unobtrusive-ajax.min.js"></script>


<script>
   

    $(document).ready(function () {
        $('#myTransientsReportTable').DataTable({
            dom: 'Bfrtip',
            buttons: [
                 'excel'
            ]
        });
    });

    
</script>
<script>

    function Create() {
        $("#newPage").load("/Inspection/CreateTypicalPrograms/");
    }

    function Edit(id) {
        $("#newPage").load("/Inspection/EditTypicalPrograms/" + id);
    }



    function showPage1() {
        $("#Tabs").load("/AgeingAssessment/SACORReport/");
    }

    function showPage2() {
        $("#Tabs").load("/AgeingAssessment/TransientsReport/");
    }

    function showPage3() {
        $("#Tabs").load("/AgeingAssessment/WaterChemistryReport/");
    }


    function showsubPage1() {
        //$("#newPage").load("/Inspection/WorkingPrograms/");
        $("#Tabs").load("/AgeingAssessment/TransientsReport/");
    }

    function showsubPage2() {
        $("#submenu").load("/AgeingAssessment/TransientsPeriod/");
    }


    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });


        var result = confirm("are you sure you want to delete?");
        if (result) {
            $.ajax({
                type: "POST",
                url: "/Inspection/DeletTypicalPrograms",
                data: { "typicalsId": selectedIDs },

                success: function (response) {
                    $("#Tabs").load("/Inspection/InspectionPrograms/");
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }

            });
        }

    });

    function CreateTypicalyDocument() {
        $("#newPage").load("/Inspection/CreateTypicalDocument/");
    }

    function EditTypicalyDocument(id) {
        $("#newPage").load("/Inspection/EditTypicalDocument/" + id);
    }

    $("#checkAllPrograms").click(function () {
        $(".checkBoxProgram").prop('checked',
            $(this).prop('checked'));
    });

    $("#deleteProgram").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBoxProgram').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });

        var result = confirm("are you sure you want to delete?");
        if (result) {
            $.ajax({
                type: "POST",
                url: "/Inspection/DeletTypicalDocument",
                data: { "typicalsId": selectedIDs },

                success: function (response) {
                    $("#Tabs").load("/Inspection/InspectionPrograms/");
                },
                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }

            });
        }

    });

</script>
